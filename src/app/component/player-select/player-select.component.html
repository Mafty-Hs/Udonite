<div class="box">
  <div class="box-item">プレイ中に使用するプレイヤー情報を設定します。</div>
  <div class="box-item">
    <form name="playerType">
      <input type="radio" name="playerType" [(ngModel)]="playerType" value=1 [checked]="playerType == 1">新規プレイヤー
      <input type="radio" name="playerType" [(ngModel)]="playerType" value=2 [checked]="playerType == 2">既存のプレイヤー
    </form>
  </div>
  <div class="box-item">
    <div *ngIf="playerType == 1 ;else savedPlayer" class="player">
      <div class="flex-item">
        <div class="item-name">
          プレイヤーアイコン
        </div>
        <div class="item-data">
          <label class="icon">
            <img class="image covor" [src]="image.url | safe: 'resourceUrl'" />
            <input type="file" name="icondata" (change)="changeIcon($event)" style="display: none;" accept=".gif, .png, .jpg, .jpeg">
          </label>
        </div>
      </div>
      <div class="flex-item">
        <div class="item-name">
          あなたの色
        </div>
        <div class="item-data">
          <input type="color" style="width:2em; height:2.5em;" [(ngModel)]="myColor">
        </div>
      </div>
      <div class="flex-item">
        <div class="item-name">
          ニックネーム
        </div>
        <div class="item-data">
          <input [(ngModel)]="myName" [style.color]="myColor == '#444444' ? '#000000' : myColor" placeholder="ニックネーム" />
        </div>
      </div>
      <div class="flex-item">
        <div class="item-name">
          パスワード
        </div>
        <div class="item-data">
          <input [(ngModel)]="password" placeholder="空ならパスワードなし"/>
        </div>
      </div>
      <div class="flex-item">
        <div class="item-name">
          パスワードを保存
        </div>
        <div class="item-data">
          <div class="toggle"><label>
            <input name="savePW" type="checkbox" [(ngModel)]="savePW">
            <div><div></div></div>
          </label></div>
        </div>
      </div>
    </div>
  </div>
  <div  class="box-item">
    <button (click)="login()" [disabled]="!canConnect">ルームに入室</button>
  </div>
</div>

<ng-template #savedPlayer >
  <div class="player">
    <div class="flex-item">
      <div class="item-name">
        プレイヤーを選択
      </div>
      <div class="item-data">
        <select name="saved" style="width:10em"  [ngStyle]="{'color': selectedPlayer.color }" [(ngModel)]="selectedPlayer" >
          <option *ngFor="let player of allPlayers" value="player" [style.color]="player.color" style="font-weight: bolder;">
            {{player.name}}
          </option>
        </select>
      </div>
    </div>
    <div class="flex-item" *ngIf="selectedPlayer.authType == 1">
      <div class="item-name">
        パスワード認証が必要です
      </div>
      <div class="item-data">
        <input [(ngModel)]="password"/>
      </div>
    </div>
  </div>
</ng-template>
